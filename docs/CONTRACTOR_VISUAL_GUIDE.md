# 🎯 Contractor Module - Visual Guide

## 📱 Screen Previews (Text-Based)

### 1. Dashboard Screen

```
╔════════════════════════════════════════════╗
║  👷 Welcome Back, John!                    ║
║  🏷️  Contractor • Construction             ║
╠════════════════════════════════════════════╣
║                                            ║
║  ┌─────────┐ ┌─────────┐ ┌─────────┐     ║
║  │ Total   │ │ Pending │ │InProgress│    ║
║  │   45    │ │   12    │ │    8     │    ║
║  └─────────┘ └─────────┘ └─────────┘     ║
║  ┌─────────┐                              ║
║  │Complete │                              ║
║  │   25    │                              ║
║  └─────────┘                              ║
║                                            ║
║  Recent Tasks                     [View All]║
║  ═════════════                             ║
║  ┌──────────────────────────────────────┐ ║
║  │ 🚧 Pothole                    URGENT │ ║
║  │ Downtown area                         │ ║
║  │ Large pothole causing...              │ ║
║  │ 📍 Main Street • 2h ago            ➤ │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ 💡 Streetlight             In Progress│ ║
║  │ Park area                             │ ║
║  │ Street light not working...           │ ║
║  │ 📍 Central Park • 5h ago           ➤ │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

### 2. Tasks Screen - Pending Tab

```
╔════════════════════════════════════════════╗
║  ← Tasks                             [•••] ║
╠════════════════════════════════════════════╣
║  [Pending] [In Progress] [All]             ║
║  ═══════                                   ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ ⚠️  Pothole                   URGENT  │ ║
║  │                         🟠 Pending    │ ║
║  │ Large pothole on main road causing    │ ║
║  │ traffic issues and safety hazards     │ ║
║  │                                        │ ║
║  │ 📍 Downtown Area                      │ ║
║  │                                        │ ║
║  │           [▶️  Start Work]            │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ 💡 Streetlight                        │ ║
║  │                         🟠 Pending    │ ║
║  │ Street light not working properly     │ ║
║  │                                        │ ║
║  │ 📍 Central Park • 5h ago              │ ║
║  │                                        │ ║
║  │           [▶️  Start Work]            │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

### 3. Tasks Screen - In Progress Tab

```
╔════════════════════════════════════════════╗
║  ← Tasks                             [•••] ║
╠════════════════════════════════════════════╣
║  [Pending] [In Progress] [All]             ║
║            ═══════════                     ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ 🚰 Drainage                           │ ║
║  │                      🟣 In Progress   │ ║
║  │ Blocked drainage system causing       │ ║
║  │ flooding in the area                  │ ║
║  │                                        │ ║
║  │ 📍 Riverside Road • 1d ago         ➤ │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ 🪧 Broken Sign                        │ ║
║  │                      🟣 In Progress   │ ║
║  │ Traffic sign damaged and needs        │ ║
║  │ immediate replacement                 │ ║
║  │                                        │ ║
║  │ 📍 Highway 101 • 2d ago            ➤ │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

### 4. Task Detail Screen - Under Review

```
╔════════════════════════════════════════════╗
║  ← Task Details                      [✓]   ║
╠════════════════════════════════════════════╣
║  🟠 Pending              🚨 URGENT         ║
║                                            ║
║  ⚠️  Pothole                               ║
║  Assigned 2 hours ago                      ║
╠════════════════════════════════════════════╣
║                                            ║
║  Description                               ║
║  ─────────────                             ║
║  Large pothole on main road causing        ║
║  traffic issues and safety concerns.       ║
║  Immediate attention required.             ║
║                                            ║
║  ┌────────────────────────────────────┐   ║
║  │ 👤 Reported by: John Citizen       │   ║
║  └────────────────────────────────────┘   ║
║  ┌────────────────────────────────────┐   ║
║  │ 📍 Location: Downtown Area         │   ║
║  └────────────────────────────────────┘   ║
║  ┌────────────────────────────────────┐   ║
║  │ 📌 Landmark: Near City Hall        │   ║
║  └────────────────────────────────────┘   ║
║  ┌────────────────────────────────────┐   ║
║  │ 📅 Reported: Dec 15, 2024 - 2:30 PM│   ║
║  └────────────────────────────────────┘   ║
║                                            ║
║  Attached Photos                           ║
║  ─────────────────                         ║
║  ┌─────┐ ┌─────┐ ┌─────┐                 ║
║  │[IMG]│ │[IMG]│ │[IMG]│                 ║
║  └─────┘ └─────┘ └─────┘                 ║
║                                            ║
║  Location on Map                           ║
║  ─────────────────                         ║
║  ┌────────────────────────────────────┐   ║
║  │          🗺️                         │   ║
║  │   Lat: 12.345678                   │   ║
║  │   Lng: 78.901234                   │   ║
║  │   [📍 Open in Maps]                │   ║
║  └────────────────────────────────────┘   ║
║                                            ║
║  Your Notes                                ║
║  ───────────                               ║
║  ┌────────────────────────────────────┐   ║
║  │ Add notes about your work...       │   ║
║  │                                [💾]│   ║
║  └────────────────────────────────────┘   ║
║                                            ║
║  ┌────────────────────────────────────┐   ║
║  │        ▶️  START WORK               │   ║
║  └────────────────────────────────────┘   ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

### 5. Task Detail Screen - In Progress

```
╔════════════════════════════════════════════╗
║  ← Task Details                      [✓]   ║
╠════════════════════════════════════════════╣
║  🟣 In Progress                            ║
║                                            ║
║  🚰 Drainage                               ║
║  Assigned 1 day ago                        ║
╠════════════════════════════════════════════╣
║                                            ║
║  [... Details section ...]                 ║
║                                            ║
║  [... Photos section ...]                  ║
║                                            ║
║  [... Location section ...]                ║
║                                            ║
║  Your Notes                                ║
║  ───────────                               ║
║  ┌────────────────────────────────────┐   ║
║  │ Started work on drainage system.   │   ║
║  │ Clearing the blockage.             │   ║
║  └────────────────────────────────────┘   ║
║  ┌────────────────────────────────────┐   ║
║  │ Add more notes...              [💾]│   ║
║  └────────────────────────────────────┘   ║
║                                            ║
║  ┌────────────────────────────────────┐   ║
║  │    ✅ MARK AS COMPLETE             │   ║
║  └────────────────────────────────────┘   ║
║  ┌────────────────────────────────────┐   ║
║  │    📷 UPLOAD PROGRESS PHOTO        │   ║
║  └────────────────────────────────────┘   ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

### 6. Completed Tasks Screen

```
╔════════════════════════════════════════════╗
║  ← Completed Tasks                   [📅]  ║
╠════════════════════════════════════════════╣
║  ┌────────────────────────────────────┐   ║
║  │ 🔍 Search by type, location...     │   ║
║  └────────────────────────────────────┘   ║
║                                            ║
║  Filtered: [Dec 1 - Dec 15, 2024 ×]       ║
║                                            ║
║  Statistics                                ║
║  ────────────                              ║
║  ┌─────────┐ ┌─────────┐ ┌─────────┐     ║
║  │✅ Total │ │📅 Month │ │⚠️ Common│     ║
║  │   25    │ │   12    │ │ Pothole │     ║
║  └─────────┘ └─────────┘ └─────────┘     ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ ✅ Pothole                            │ ║
║  │ Completed 2 days ago                  │ ║
║  │                                        │ ║
║  │ Large pothole on main road...         │ ║
║  │                                        │ ║
║  │ 📍 Downtown Area                      │ ║
║  │                                        │ ║
║  │ 📝 Fixed and resurfaced the road   ➤ │ ║
║  │                                        │ ║
║  │ 📷 3 photos attached                  │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
║  ┌──────────────────────────────────────┐ ║
║  │ ✅ Streetlight                        │ ║
║  │ Completed 5 days ago                  │ ║
║  │                                        │ ║
║  │ Street light not working...           │ ║
║  │                                        │ ║
║  │ 📍 Central Park                    ➤ │ ║
║  └──────────────────────────────────────┘ ║
║                                            ║
╚════════════════════════════════════════════╝
```

---

## 🔄 User Flow Diagrams

### Flow 1: Start Work on New Task

```
[Dashboard]
    ↓
[View Recent Task] or [Go to Tasks Screen]
    ↓
[Tasks Screen - Pending Tab]
    ↓
[Tap on Task Card] → [View Full Details]
    ↓
[Task Detail Screen]
    ↓
[Press "Start Work" Button]
    ↓
[Status Updates: underReview → inProgress]
    ↓
[SnackBar: "Work started successfully" ✅]
    ↓
[Task moves to "In Progress" tab]
```

---

### Flow 2: Complete a Task

```
[Tasks Screen - In Progress Tab]
    ↓
[Tap on Task Card]
    ↓
[Task Detail Screen]
    ↓
[Add Notes (Optional)]
    ↓
[Upload Progress Photos (Optional)]
    ↓
[Press "Mark as Complete" Button]
    ↓
[Confirmation Dialog Appears]
   "Are you sure you want to mark this task as complete?"
   [Cancel] [Complete]
    ↓
[Press "Complete"]
    ↓
[Status Updates: inProgress → resolved]
[completedAt timestamp set]
    ↓
[SnackBar: "Task marked as complete" ✅]
    ↓
[Navigate back to Tasks Screen]
    ↓
[Task appears in "Completed Tasks" screen]
```

---

### Flow 3: Upload Progress Photo

```
[Task Detail Screen - In Progress]
    ↓
[Press "Upload Progress Photo" Button]
    ↓
[Camera Opens]
    ↓
[Take Photo]
    ↓
[Image Compression: 1920x1080, 85% quality]
    ↓
[Upload to Firebase Storage]
    ↓
[Get Download URL]
    ↓
[Add URL to complaint.mediaUrls array]
    ↓
[SnackBar: "Photo uploaded successfully" ✅]
    ↓
[Photo appears in gallery]
```

---

### Flow 4: Search Completed Tasks

```
[Completed Tasks Screen]
    ↓
[Type in Search Bar: "pothole"]
    ↓
[Real-time Filter Applied]
    ↓
[Results Update: Show only pothole tasks]
    ↓
[Press Date Range Icon]
    ↓
[Select Date Range: Dec 1 - Dec 15]
    ↓
[Apply Button]
    ↓
[Results Update: Show potholes from Dec 1-15]
    ↓
[Statistics Recalculate]
    ↓
[Tap on Task Card]
    ↓
[View Full Details (Read-only)]
```

---

## 🎨 Color Coding

### Status Colors

```
Pending       🟠 #FF9800 (Orange)
Under Review  🔵 #2196F3 (Blue)
In Progress   🟣 #9C27B0 (Purple)
Resolved      🟢 #4CAF50 (Green)
Rejected      🔴 #F44336 (Red)
```

### Action Colors

```
Primary Action  🟣 Purple (Contractor theme)
Success        🟢 Green
Warning        🟡 Amber
Danger         🔴 Red
```

### Component Colors

```
Card Background    #FFFFFF (White)
Text Primary       #212121 (Dark Gray)
Text Secondary     #757575 (Gray)
Border             #E0E0E0 (Light Gray)
Background         #FAFAFA (Off-White)
```

---

## 📊 Data Flow Diagram

```
┌─────────────────────────────────────────────────┐
│              Firebase Firestore                  │
│                  (complaints)                    │
└───────────┬─────────────────────────┬───────────┘
            │                         │
            │ Stream                  │ Update
            ↓                         ↑
┌───────────────────────┐   ┌────────────────────┐
│  DASHBOARD SCREEN     │   │  ACTIONS           │
│  - Statistics         │   │  - Start Work      │
│  - Recent Tasks       │   │  - Mark Complete   │
└───────┬───────────────┘   │  - Save Notes      │
        │                   │  - Upload Photo    │
        ↓                   └────────────────────┘
┌───────────────────────┐             ↑
│  TASKS SCREEN         │             │
│  - Pending Tab        │             │
│  - In Progress Tab    │             │
│  - All Tab            │             │
└───────┬───────────────┘             │
        │                             │
        ↓                             │
┌───────────────────────┐             │
│  TASK DETAIL SCREEN   │─────────────┘
│  - Full Details       │
│  - Image Gallery      │
│  - Map View           │
│  - Notes              │
│  - Actions            │
└───────┬───────────────┘
        │
        ↓
┌───────────────────────┐
│  COMPLETED TASKS      │
│  - Search Filter      │
│  - Date Range Filter  │
│  - Statistics         │
│  - History List       │
└───────────────────────┘
```

---

## 🔐 Security Flow

```
User Login
    ↓
[Firebase Authentication]
    ↓
Get Current User
    ↓
userId = currentUser?.uid
    ↓
[Firestore Query]
where('assignedTo', '==', userId)
    ↓
[Only contractor's assigned tasks visible]
    ↓
[Actions restricted to assigned tasks]
    ↓
[Storage upload path: contractor_progress/{userId}/]
```

---

## 📱 Responsive Layouts

### Portrait Mode (Default)

```
┌──────────────────┐
│    App Bar       │
├──────────────────┤
│                  │
│                  │
│   Main Content   │
│                  │
│                  │
│                  │
│                  │
├──────────────────┤
│  Bottom Nav Bar  │
└──────────────────┘
```

### Landscape Mode (Same Layout)

```
┌────────────────────────────────────┐
│         App Bar                    │
├────────────────────────────────────┤
│                                    │
│       Main Content (Scrollable)    │
│                                    │
├────────────────────────────────────┤
│         Bottom Nav Bar             │
└────────────────────────────────────┘
```

---

## 🎭 Loading States

```
Initial Load:
┌────────────────────┐
│                    │
│        ⏳          │
│   Loading...       │
│                    │
└────────────────────┘

Button Action:
┌──────────────────────┐
│  ⏳ Processing...    │
└──────────────────────┘

Image Upload:
┌──────────────────────┐
│  📤 Uploading...     │
└──────────────────────┘
```

---

## 🚫 Empty States

```
No Tasks:
┌────────────────────┐
│        📋          │
│   No Tasks Yet     │
│  Your tasks will   │
│  appear here       │
└────────────────────┘

No Search Results:
┌────────────────────┐
│        🔍          │
│  No Results Found  │
│  Try adjusting     │
│  your filters      │
└────────────────────┘
```

---

## ✅ Success Messages

```
[Start Work]
"Work started successfully" ✅

[Complete Task]
"Task marked as complete" ✅

[Save Notes]
"Notes saved successfully" ✅

[Upload Photo]
"Photo uploaded successfully" ✅
```

---

## ❌ Error Messages

```
[Network Error]
"Error: Failed to connect to server" ❌

[Upload Error]
"Error: Failed to upload photo" ❌

[Permission Error]
"Error: Camera permission denied" ❌
```

---

## 🔔 Notification States

```
[Task Assigned]
"📋 New task assigned: Pothole at Downtown"

[Status Update]
"✅ Task completed: Streetlight at Central Park"

[Comment Added]
"💬 Admin added a comment to your task"
```

---

## 🎯 Quick Actions

### From Dashboard

- Tap statistic card → Filter tasks by status
- Tap recent task → View details
- Tap "View All" → Go to tasks screen

### From Tasks Screen

- Swipe tab → Switch filter
- Tap card → View details
- Press "Start Work" → Begin task

### From Task Detail

- Tap image → Full screen view
- Press camera icon → Upload photo
- Press save icon → Save notes
- Press complete → Finish task

### From Completed Tasks

- Type in search → Filter results
- Press calendar → Select date range
- Tap card → View details
- Tap × on filter chip → Remove filter

---

_Visual guide for Contractor Module v1.0_
_All screens are production-ready_ ✨
